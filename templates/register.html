<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/static/css/register.css">
    <title> Register with NZ Wildlife </title>
</head>
<body>

<header class="top-header">
    <a href="/" class="logo-container">
        <img src="/static/images/nz-wildlife-logo.png" alt="NZ Wildlife Logo" class="logo-image">
    </a>
    <div class="auth-links">
        <a href="/" class="auth-link">HOME / KĀINGA</a>
        <a href="/favourites" class="auth-link">FAVOURITES / MAKAU</a>
        <a href="/map" class="auth-link">MAP / MAPI</a>
        <a href="/about" class="auth-link">ABOUT / MŌ MĀTOU</a>
        <a href="/login" class="auth-link">LOG IN / TAKIURU</a>
        <a href="/register" class="auth-link active">REGISTER / REHITA</a>
    </div>
</header>

<!--Text at the top of the page-->
<div class="container">
  <div class="auth-card">
    <h1>Register <br> Rehita</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash-message {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

    <p>Please fill in this form to create an account.</p>

    <!--Input fields for users to register-->
    <form method="post" action="/register">
        <hr>
        <label for="email"><b>Email / Wāhitau īmēra</b></label>
        <input type="text" placeholder="Enter Email" name="email" id="email" required maxlength="100">

        <label for="psw"><b>Password / Kupuhipa</b></label>
        <input type="password" placeholder="Enter Password" name="psw" id="psw" required maxlength="50" minlength="8">

        <label for="psw-repeat"><b>Repeat Password / Tukurua Kupuhipa</b></label>
        <input type="password" placeholder="Repeat Password" name="psw-repeat" id="psw-repeat" required maxlength="50" minlength="8">
        <hr>
        <button type="submit" class="registerbtn">Register / Rehita</button>
    </form>

    <!--Link to sign in page-->
    <div class="signin">
        <p>Registered or already have an account? <a href="/login">Login</a> to proceed</p>
    </div>
  </div>
</div>
<script>
// Add active state styling and auto-detect current page
document.addEventListener('DOMContentLoaded', function() {
    // Add the active state styling
    const style = document.createElement('style');
    style.textContent = `
        .auth-link.active {
            background: rgba(127, 176, 105, 0.2);
            border-color: var(--accent-color);
            color: var(--accent-color);
        }
    `;
    document.head.appendChild(style);
    
    // Auto-detect and highlight current page
    const currentPath = window.location.pathname;
    const authLinks = document.querySelectorAll('.auth-link');
    
    // Remove all active classes first
    authLinks.forEach(link => link.classList.remove('active'));
    
    // Add active class to current page
    authLinks.forEach(link => {
        const href = link.getAttribute('href');
        if ((currentPath === '/' && href === '/') ||
            (currentPath !== '/' && href !== '/' && currentPath.startsWith(href))) {
            link.classList.add('active');
        }
    });
});
</script>

</body>
</html>